<html>
    <head>
        <title>Event Emitter Test</title>
    </head>
    <body>
        <a href="event_moderator_test.html">Previous test: Event Moderator</a>
        <a href="physics_assistant_test.html">Next test: Physics Assistant</a>
        <h1>Event Emitter Test</h1>
        <div id="result"></div>
        <script type="text/javascript" src="../lib/event_moderator.js"></script>
        <script type="text/javascript" src="../lib/event_emitter.js"></script>
        <script type="text/javascript" src="../lib/extend.js"></script>
        <script type="text/javascript">
            var ethon = ethon,
                eventEmitter = ethon.eventEmitter,
                extend = ethon.extend,
                result = document.getElementById("result");

            var Dog = function() {
            };
            extend(eventEmitter, Dog.prototype);

            Dog.prototype.bark = function() {
                result.innerHTML += "Dog is barking! on " + new Date() + "<br />"
                this.trigger("bark", new Date());
            };

            var Cat = function() {
            };
            extend(eventEmitter, Cat.prototype);

            Cat.prototype.on("bark", function(timestamp) {
                result.innerHTML += "Cat is running away on " + timestamp + "<br /><br />"
            });

            var dog = new Dog(),
                cat = new Cat();

            setInterval(function() {
                dog.bark();
            }, 1000);
        </script>
    </body>
</html>
