#!/bin/bash

OUT_FILE='ethon'
VERSION=$1

if [ $# -ne 1 ]; then
  printf "Usage: build VERSION\n\nExample:\n build <branch_or_tag>\n"
  exit 1
fi

# Checkout to the version
git checkout $VERSION

# Build the version
r.js -o app.build.js

# Rename the output file for including version
mv release/$OUT_FILE.js release/$OUT_FILE.$VERSION.js

# Restore git state
git checkout master 

printf "$VERSION compiled successfully\n"
